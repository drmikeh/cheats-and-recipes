<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>JavaScript Promises Cheatsheet | Cheats and Recipes</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Cheat sheet for JavaScript Promises"><link rel=stylesheet href=/cheats-and-recipes/css/main.css><link rel=stylesheet href=/cheats-and-recipes/css/dracula.css><link rel=stylesheet href=/cheats-and-recipes/css/custom.css><link rel=icon href=/cheats-and-recipes/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/cheats-and-recipes/icons/32.png sizes=32x32 type=image/png></head><body><header class=header><a class=logo href=/cheats-and-recipes/>Cheats and Recipes</a></header><div class=primary><main class=main><div class="single block"><article class=post><h1 class=post__title>JavaScript Promises Cheatsheet</h1><details class="post__toc toc"><summary class=toc__title>Table of Contents</summary><nav id=TableOfContents><ul><li><ul><li><a href=#making-promises>Making promises</a></li><li><a href=#using-promises>Using promises</a></li><li><a href=#using-promises-with-finally>Using promises with finally</a></li><li><a href=#promise-functions>Promise functions</a></li><li><a href=#async-await>Async-await</a></li><li><a href=#promiseall-with-async-await>Promise.all with async-await</a></li></ul></li></ul></nav></details><div class=post__content><p>A promise represents the eventual result of an asynchronous operation. JavaScript promises were added to the language in ES-2015.</p><h3 id=making-promises>Making promises</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>ok</span><span class=p>)</span> <span class=p>{</span>
        <span class=nx>resolve</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span>
    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
        <span class=nx>reject</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
    <span class=p>}</span>
<span class=p>})</span>
</code></pre></div><p>For asynchronous programming, see: <a href=https://babeljs.io/learn-es2015/#promises>Promises</a></p><h3 id=using-promises>Using promises</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>promise</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>result</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=err>···</span> <span class=p>})</span>
  <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>error</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=err>···</span> <span class=p>})</span>
</code></pre></div><h3 id=using-promises-with-finally>Using promises with finally</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>promise</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>result</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=err>···</span> <span class=p>})</span>
  <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>error</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=err>···</span> <span class=p>})</span>
  <span class=p>.</span><span class=k>finally</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span> <span class=c1>// logic independent of success/error })
</span></code></pre></div><p>The handler is called when the promise is fulfilled or rejected.</p><h3 id=promise-functions>Promise functions</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>(</span><span class=err>···</span><span class=p>)</span>
<span class=nb>Promise</span><span class=p>.</span><span class=nx>race</span><span class=p>(</span><span class=err>···</span><span class=p>)</span>
<span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=err>···</span><span class=p>)</span>
<span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=err>···</span><span class=p>)</span>
</code></pre></div><h3 id=async-await>Async-await</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>async</span> <span class=kd>function</span> <span class=nx>run</span><span class=p>()</span> <span class=p>{</span>
    <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getUser</span><span class=p>()</span>
    <span class=kr>const</span> <span class=nx>tweets</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getTweets</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span>
    <span class=k>return</span> <span class=p>[</span><span class=nx>user</span><span class=p>,</span> <span class=nx>tweets</span><span class=p>]</span>
<span class=p>}</span>
</code></pre></div><p><code>async</code> functions are another way of using promises.</p><p>See: <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function>async function</a></p><h3 id=promiseall-with-async-await>Promise.all with async-await</h3><p>Use <code>Promise.all</code> to execute concurrent asynchronous operations and wait for them all to resolve (or any of them to reject).</p><p>Example:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=k>try</span> <span class=p>{</span>
    <span class=kr>const</span> <span class=p>[</span><span class=nx>departments</span><span class=p>,</span> <span class=nx>products</span><span class=p>,</span> <span class=nx>cart</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
        <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>([</span>
            <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/departments&#39;</span><span class=p>),</span>
            <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/products&#39;</span><span class=p>),</span>
            <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/cart&#39;</span><span class=p>)</span>
        <span class=p>])</span>
    <span class=p>).</span><span class=nx>map</span><span class=p>(</span><span class=nx>r</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
        <span class=nx>departments</span><span class=p>,</span>
        <span class=nx>products</span><span class=p>,</span>
        <span class=nx>cart</span><span class=p>,</span>
        <span class=nx>loading</span><span class=o>:</span> <span class=kc>false</span>
    <span class=p>})</span>
<span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;ERROR:&#39;</span><span class=p>,</span> <span class=nx>e</span><span class=p>)</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span> <span class=nx>updating</span><span class=o>:</span> <span class=kc>false</span> <span class=p>})</span>
    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;ERROR: &#39;</span> <span class=o>+</span> <span class=nx>e</span><span class=p>.</span><span class=nx>message</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div></div><footer class=post__footer><div class=post__tags><a class="post__tag btn" href=/cheats-and-recipes/tags/javascript/>javascript</a>
<a class="post__tag btn" href=/cheats-and-recipes/tags/promises/>promises</a>
<a class="post__tag btn" href=/cheats-and-recipes/tags/es-2015/>ES-2015</a></div></footer></article></div></main><div class="related block"><h3 class=related__title>Related</h3><ul class=related__list><li class=related__item><a class=related__link href=/cheats-and-recipes/cheat/es-2015/>ES2015+ Cheatsheet</a></li><li class=related__item><a class=related__link href=/cheats-and-recipes/cheat/functional-javascript/>Functional JavaScript Cheatsheet</a></li><li class=related__item><a class=related__link href=/cheats-and-recipes/recipe/composable-functional-javascript/>Composable Functional JavaScript</a></li><li class=related__item><a class=related__link href=/cheats-and-recipes/recipe/express-restful-api/>Express RESTful API Server Recipe</a></li><li class=related__item><a class=related__link href=/cheats-and-recipes/cheat/js-doc/>JSDoc Cheatsheet</a></li></ul></div></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=mailto:drmikeh@gmail.com><svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h3e2c7 0 13 3 17 7L256 281zm54-23 121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://twitter.com/drmikeh><svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 01-40 12 72 72 0 0032-40 72 72 0 01-45 17 72 72 0 00-122 65 2e2 2e2.0 01-145-74 72 72 0 0022 94 72 72 0 01-32-7 72 72 0 0056 69 72 72 0 01-32 1 72 72 0 0067 50A2e2 2e2.0 0193 368a2e2 2e2.0 00309-179 2e2 2e2.0 0035-37"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://www.pinterest.com/drmikeh2297><svg class="social__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 002 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://linkedin.com/in/drmikehopper><svg class="social__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/drmikeh><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2021 Cheats and Recipes. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src=/cheats-and-recipes/js/custom.js></script></body></html>